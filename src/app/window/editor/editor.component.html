<div class="tab-container thin-scroll" #tabContainer>
    <ng-container *ngFor="let tab of tabs"
        [ngTemplateOutlet]="tabTemplate"
        [ngTemplateOutletContext]="{fileNode: tab}">
    </ng-container>
</div>
<div id="editor">
    <div class="line-numbers">
        <div class="line-numbers-container" *ngFor="let line of lines;index as i">{{i+1}}</div>
    </div>
    <div class="lines" #linesRef>
        <span class="line-container default-element" *ngFor="let line of lineElements; index as i" spellcheck="false">
            <ng-container *ngFor="let element of line" (input)="checkChange($event)"
                [ngTemplateOutlet]="element.type === 'whitespace' ? defaultElement : styledElementTemplate"
                [ngTemplateOutletContext]="{element: element, lineNumber: i}">
            </ng-container>
        </span>
    </div>
</div>
<ng-template #styledElementTemplate let-element="element" let-lineNumber="lineNumber">
    <span (input)="checkChange(element, elementRef)" [ngClass]="getClass(element)" [innerHTML]="element.value" contenteditable="true" #elementRef></span>
</ng-template>
<ng-template #defaultElement let-element="element" let-lineNumber="lineNumber"><pre>{{element.value}}</pre></ng-template>

<ng-template #tabTemplate let-fileNode="fileNode">
    <div class="tab" [ngClass]="this.tabElements[fileNode.path].edited" [title]="getTabTitle(fileNode.path)" [id]="fileNode.path" (click)="setFocus(fileNode)" (dblclick)="removeTab(fileNode)">
        <span>{{fileNode.name}}</span>
        <!-- <div class="tab-tooltip"><span>{{fileNode.path}}</span></div> -->
    </div>
</ng-template>